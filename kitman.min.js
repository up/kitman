var kitman={language:"en",TemplateCache:null,run:function(a,g){function c(a,c){var e,q;for(e=a+1;e<c;)q=d[e],typeof q==="function"?e+=q():(n+=q,++e)}function l(a,u,e){var d=k,f=o,j;if(a instanceof Array){j=a.length;for(o=0;o<j;++o)k=a[o],c(u,e)}else k=a,o=void 0,c(u,e);k=d;o=f}function m(a){n="";l(a instanceof Array?{"":a}:a,-1,d.length);return n}function h(a,c,e,d){return function(){var f=k[a],j;j=f?f instanceof Array&&f.length===0?!1:!0:!1;return j?(l(f,c,e),(d||e)-c):e-c}}function p(a){var c,e, d,f=a.indexOf("|");f>=0&&(e=a.substr(f+1),a=a.substr(0,f),e.substr(0,1)==="*"?(c=e.substr(1),e=d="SUM"):e.substr(0,4)==="DATE"&&(c=e.substr(5),e=d="DATE"),e=w[e]);return a==="."?d==="DATE"?function(){n+=e(c);return 1}:e?function(){n+=e(k,k);return 1}:function(){k!==void 0&&(n+=k);return 1}:d==="SUM"?function(){n+=e(k[a],c);return 1}:e?function(){n+=e(k[a],k);return 1}:function(){var c=k[a];c!==void 0&&(n+=c);return 1}}function v(a,d){return function(){c(a,d);return d-a+1}}function r(a,d,e,g){var f= new Function("_","at","with(_) {return ("+a+");}");return function(){return f(k,o)?(c(d,e),g-d):e-d}}function x(){var c,g,e;for(c=0;c<a.length;){g=a.indexOf("{{",c);if(g<0)break;e=a.indexOf("}}",g+2);if(e<0)break;d.push(a.substring(c,g));d.push(a.substring(g+2,e));c=e+2}d.push(a.substr(c))}var n="",d=[],k=null,o=0,w=kitman.formatters||{},t=null;if(a.charAt(0)==="#"){t=document.getElementById(a.substr(1));if(!t)throw"Template element #"+t+" not found";a=t.innerHTML;if(kitman.TemplateCache===null)kitman.TemplateCache= a}(function(){function a(f,j){var b,i;for(b=f+2;b<g;b+=2)switch(i=d[b],i.charAt(0)){case "#":b=c(b,i.substr(1));continue;case "?":b=e(b,i.substr(1));d[b]==="/?"?d[b]="":b-=2;continue;case "/":return d[f]=v(f,b),i.substr(1)===j&&(d[b]=""),b;case "^":return d[f]=v(f,b),b;default:d[b]=p(i)}return b}function c(f,j){for(var b=f+2;b<g;b+=2){var i=d[b];switch(i.charAt(0)){case "#":b=c(b,i.substr(1));continue;case "?":b=e(b,i.substr(1));d[b]==="/?"?d[b]="":b-=2;continue;case "^":if(i.substr(1)===j)return i= b,b=a(b,j),d[f]=h(j,f,i,b),b;d[f]=h(j,f,b,b);return b-2;case "/":d[f]=h(j,f,b);if(i.substr(1)!=j)return b-2;d[b]="";return b;default:d[b]=p(i)}}return b}function e(f,j){for(var b=f+2;b<g;b+=2){var i,h=d[b];switch(h.charAt(0)){case "#":b=c(b,h.substr(1));continue;case "?":return i=b,b=e(b,h.substr(1)),d[f]=r(j,f,i,b),b;case "^":if(h.substr(1)==="?")return i=b,b=a(b,"?"),d[f]=r(j,f,i,b),b;d[f]=r(j,f,b,b);return b-2;case "/":d[f]=r(j,f,b,b);if(h.substr(1)!="?")return b-2;d[b]="";return b;default:d[b]= p(h)}}return b}x();var g=d.length;c(-1,"")})();return g===void 0?function(a){return m(a)}:m(g)},restore:function(){},formatters:{DATE:function(a){return kitman.tools.formatDate(a)},EURO:function(a){return kitman.tools.euroFormat(a)},SUM:function(a,g){var c=g.split("|"),l=c[0],m=kitman.tools.currencyFormat(a),l=kitman.tools.currencyFormat(l);m*=l;c[1]==="EURO"?m=kitman.tools.euroFormat(m):c[1].length>0&&(m=m.toFixed(parseInt(c[1])));return m}},tools:{formatDate:function(a){a||(a="MM/dd/yyyy");var g= new Date,c=g.getMonth()+1,l=g.getFullYear(),a=a.replace("MM",kitman.tools.pad2(c.toString()));a.indexOf("yyyy")>-1?a=a.replace("yyyy",l.toString()):a.indexOf("yy")>-1&&(a=a.replace("yy",l.toString().substr(2,2)));a=a.replace("dd",kitman.tools.pad2(g.getDate().toString()));c=g.getHours();a.indexOf("t")>-1&&(a=c>11?a.replace("t","pm"):a.replace("t","am"));a.indexOf("HH")>-1&&(a=a.replace("HH",kitman.tools.pad2(c.toString())));a.indexOf("hh")>-1&&(c>12&&(c-=12),c===0&&(c=12),a=a.replace("hh",kitman.tools.pad2(c.toString()))); a.indexOf("mm")>-1&&(a=a.replace("mm",kitman.tools.pad2(g.getMinutes().toString())));a.indexOf("ss")>-1&&(a=a.replace("ss",kitman.tools.pad2(g.getSeconds().toString())));return a},pad2:function(a){return(a<10?"0":"")+a},euroFormat:function(a){a=kitman.tools.currencyFormat(a);a=kitman.tools.commaFormat(a);return a+" \u20ac"},currencyFormat:function(a){var g="",a=parseFloat(a);isNaN(a)&&(a=0);a<0&&(g="-");a=Math.abs(a);a=parseInt((a+0.005)*100,10);a/=100;s=new String(a);s.indexOf(".")<0&&(s+=".00"); s.indexOf(".")===s.length-2&&(s+="0");return s=g+s},commaFormat:function(a){var g="",c=a.split(".",2),a=c[1],c=parseInt(c[0],10),l=",",m=".",h,p;kitman.language!=="en"&&(l=".",m=",");if(isNaN(c))return"";c<0&&(g="-");c=Math.abs(c);h=new String(c);for(c=[];h.length>3;)p=h.substr(h.length-3),c.unshift(p),h=h.substr(0,h.length-3);h.length>0&&c.unshift(h);h=c.join(l);a=a.length<1?h:h+m+a;return g+a}}};